<!DOCTYPE html>
<html>
    <head>
        <title> My Project</title>
        <link rel="stylesheet" type="text/css" href="Css/style.css">
     </head>
     <style>
         div{
            border: 3px solid #1c1d1c;
            padding: 5px;
        }
        .img1{
            float: right;
        }
        .clearfix{
            overflow: auto;
        }
        table {
          font-family: Verdana, sans-serif;
          border-collapse: bold;
          width: 55%;
          margin-left: 30px;
        }
        td, th {
          border: 1px solid rgb(3, 3, 3);
	        text-align: center;
	        padding: 10px;
        }
        h2.title {text-align: center; }
        html{
            background: url(Img/fp\ background.jpg) no-repeat fixed ; 
            background-size: cover;
        }
     </style>
     <body id = "containerblack">
        <hr>
        <ul>
               
            <li> <a href = "index.html" >Home</a> </li>

            <li> <a href = "aboutme.html" >About Me</a> </li>
            <li> <a href = "MyProject.html" >My Project</a> </li>

            <li class = "dropdown">
                <a href = "blog.html" 
                    class = "dropbtn">Blog</a>
                <div class="dropdown-content">
                    <a href="PCB Fabrication.html">PCB Fabrication</a>
                    <a href="Electronics design.html">Electronics Design</a>
                    <a href="2D Machining.html">2D Machining</a>
                    <a href="Embedded Programming.html">Embedded Programming</a>
                    <a href="Molding and Casting with 3D Machining.html">Molding and Casting with 3D-Machining</a>
                    <a href="Interface and Application Programming.html">Interfaceand and Application Programming</a>
                    <a href="blog.html">Blog Summary</a>  
                </div>
            </li>    
        </ul>
        <hr>
         <h1 class="center">KeyPad</h1><hr>
         <p class="center"><a href="#Req">Requirement</a></p>
         <p class="center"><a href="#Idea">Ideation</a></p>
         <p class="center"><a href="#Bill">Bill of Materials</a></p>
         <p class="center"><a href="#Eagle">Eagle (PCB board)</a></p>
         <p class="center"><a href="#Fab">Fabrication of PCB board</a></p>
         <p class="center"><a href="#Solder">Soldering</a></p>
         <p class="center"><a href="#case">Design Case and cover</a></p>
         <p class="center"><a href="#2D">2D Machining case</a></p>
         <p class="center"><a href="#3D">3D printing cover</a></p>
         <p class="center"><a href="#code">Coding</a></p>
         <p class="center"><a href="#ass">Assembly</a></p>
         <p class="center"><a href="#Final">Final Product</a></p><hr>
         <h3 class="center" id="Req">Requirement</h3>
         <p class="center">The final project must include:
            <br>
            1. 2D and/or 3D designed part(s)<br>
            2. subtractive manufacturing (i.e. cnc) part<br>
            3. may include:<br>
            -->molded or cast part(s)<br>
            --> 3d printed part(s)<br>
            -->laser cut part(s)<br>
            4. an embedded microntroller that you designed & fabricated<br>
            5. input and/or output device(s) that interacts with the user
            embedded program</p><hr>
        <h3 class="center" id="Idea">Ideation</h3>
        <p class="center">For my final project I have decided to create a keypad that allows me to play my favourite game Tetris.
             As my current keyboard do not have the arrows key for me to play Tetris and have some spare switches lying around at my house.
             This keypad will have a total of 4 keys
        </p><hr>
        <h3 class="center" id="Bill">Bill of Materials</h3>
        <table class="centertable">
            <tr>
                <th>Item</th>
                <th>Quantity</th>
            </tr>
            <tr>
                <th>ATTiny1614</th>
                <th>1</th>
            </tr>
            <tr>
                <th>Gateron Brown Switch</th>
                <th>4</th>
            </tr>
            <tr>
                <th>Keycaps</th>
                <th>4</th>
            </tr>
            <tr>
                <th>1uF capacitor</th>
                <th>1</th>
            </tr>
            <tr>
                <th>Headers</th>
                <th>8(switches), 6(FTDI), 3(UPDI)</th>
            </tr>
            <tr>
                <th>Female Jumper wires</th>
                <th>At least 15</th>
            </tr>
        </table><hr>
        <h3 class="center" id="Eagle">Designing PCB board</h3>
        <p class="center">One of the problems I faced when making the PCB board is deciding on 
            which chip to use. After consulting Mr Steven, he recommend me to use the ATTiny1614 since 
            that only have 4 switches. After putting in the headers for the switches I decide to put one 2x2 pinhead
            in case after making the board I want to add more stuff onto the board.FTDI and UPDI pins are added as I will using
            them when coding. After arranging everything in order below is how the final circuit will look like.
        </p><br>
        <p class="center"><img src="Img/FinalProject/Schemetic board.jpeg" width="700" height="400"></p>
        <p class="center">I then convert into the schematic board and start arranging it so that all the wires are connected
            correctly. </p>
        <p class="center"><img src="Img/FinalProject/Schemetic board2.jpeg" width="600" height="400"></p>
        <p class="center">Using Gimp to fill up the padholes and change the inside of the outline to white</p>
        <table class="centertable">
            <tr>
                <th>Tracekeypad</th>
                <th><img src="Img/FinalProject/Tracekeypad.png" width="500" height="400"></th>
            </tr>
            <tr>
                <th>Outlinekeypad</th>
                <th><img src="Img/FinalProject/outlinekeypad.png" width="500" height="400"></th>
            </tr>
        </table>
       
        <p class="center">After Importing the image in gimp, I can use the mod software to generate the G-code and save it in my thumb drive than then load it into Stepcraft420</p>
        <table class="centertable">
            <tr>
                <th>Trace cutting</th>
                <th><img src="Img/FinalProject/tracecutting.jpeg" width="400" height="400">
                    <img src="Img/FinalProject/tracefinish.jpeg" width="400" height="400">
                    <img src="Img/FinalProject/tracescreen.jpeg" width="500" height="400">
                    <br>Video<br>
                    <video class="center" controls>
                        <source src="Img/FinalProject/tracecutting.mp4" type="video/mp4" >
                        Your browser does not support HTML video.
                    </video></th>
            </tr>
            <tr>
                <th>Outline Cutting</th>
                <th><img src="Img/FinalProject/outlinecutting.jpeg" width="300" height="450">
                    <img src="Img/FinalProject/outlinescreen.jpeg" width="500" height="400">
                    <br>Video<br>
                    <video class="center" controls>
                        <source src="Img/FinalProject/outlinecutting.mp4" type="video/mp4" >
                        Your browser does not support HTML video.
                    </video></th>
            </tr>
            <tr>
                <th>Completed PCB board. I have to sand off the sharp edges</th>
                <th><img src="Img/FinalProject/PCB board.jpeg" width="500" height="400"></th>
            </tr>
        </table><hr>
        <h3 class="center" id="Solder">Soldering</h3>
        <p class="center">After cutting the PCB I can move on to soldering the components.</p>
        <table class="centertable">
            <tr>
                <th>Switches</th>
                <th><img src="Img/FinalProject/solderingswitch.jpeg" width="350" height="400">
                <br>Adding the heat shrink will help secure the wires to the switches better<br>
                <img src="Img/FinalProject/switches complete.jpeg" width="350" height="400"></th>
            </tr>
            <tr>
                <th>Headers, chips and components</th>
                <th><img src="Img/FinalProject/solderheaders.jpeg" width="350" height="400"></th>
            </tr>
            <tr>
                <th>Finish soldering</th>
                <th><img src="Img/FinalProject/soldering final.jpeg" width="350" height="300"></th>
            </tr>
        </table><hr>
        <h3 class="center" id="case">Designing the Case and Cover</h3>
        <p class="center">I use fusion360 to desgin my case and cover. For the case it will be 2D Machine and the cover will be 3D printed</p>
        <p class="center">Below are the parameters</p>
        <p class="center"><img src="Img/FinalProject/Parameters.png" width="750" height="200"></p>
        <p class="center">The cover is 90x80x3mm. After measuring my switches I set the keyslot to 14.20mm and 4.8mm apart</p>
        <p class="center"><img src="Img/FinalProject/keyslot.png" width="500" height="400"></p>
        <p class="center">I added extra 1.50mm space incase I measure the height wrongly</p>
        <p class="center"><img src="Img/FinalProject/extraspace.png" width="500" height="400"></p>
        <p class="center">The case is 90x80x18mm and a thickness of 10mm. The 15x13mm slot is where the wires for the ftdi will go.</p>
        <p class="center"><img src="Img/FinalProject/case.png" width="500" height="400"></p>
        <p class="center">The complete case and cover</p>
        <p class="center"><img src="Img/FinalProject/fusion360.png" width="500" height="400"></p>
        <p class="center"><iframe src="https://a360.co/3Qc2B7j" width="900" height="600" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" frameborder="0"></iframe></p>
        <hr>
        <h3 class="center" id="2D">2D Machining Case</h3>
        <p class="center">You can view <a href="2D Machining.html"> 2D Machining </a> on how to set up the machine</p>
        <p class="center"><video class="center" controls>
            <source src="Img/FinalProject/2Dcnc.mp4" type="video/mp4" >
            Your browser does not support HTML video.
        </video></p>
        <p class="center">After removing it I still have to sand the sides so that it will not be very rough</p>
        <p class="center"><img src="Img/FinalProject/2dcnc.jpeg" width="500" height="400"></p>
        <p class="center">Completed case</p>
        <p class="center"><img src="Img/FinalProject/CNCcover.jpeg" width="400" height="400"></p>
        <hr><h3 class="center" id="3D">3D printing cover</h3>
        <p class="center">I use the Ultimaker to print the cover</p>
        <table class="centertable">
            <tr>
                <th>Setting</th>
                <th>Infomation</th>
            </tr>
            <tr>
                <th>Layer Height</th>
                <th>0.25mm</th>
            </tr>
            <tr>
                <th>Infill Density</th>
                <th>10%</th>
            </tr>
            <tr>
                <th>Infill Pattern</th>
                <th>Grid</th>
            </tr>
            <tr>
                <th>Speed</th>
                <th>80mm/s</th>
            </tr>
            <tr>
                <th>Support</th>
                <th>Yes</th>
            </tr>
            <tr>
                <th>Build Plate Adhesion</th>
                <th>Skirt</th>
            </tr>
        </table>
        <p class="center">Time taken to print: 53min</p>
        <p class="center"><img src="Img/FinalProject/ultimaker.png" width="400" height="400"></p>
        <p class="center"><img src="Img/FinalProject/3Dprinting.jpeg" width="400" height="400"></p>
        <p class="center">Top view</p>
        <p class="center"><img src="Img/FinalProject/3Dprint top.jpeg" width="350" height="400"></p>
        <hr>
        <h3 class="center" id="code">Testing/Coding</h3>
        <p class="center">Because I didnt include a USB port I will have to code both arduino and python</p>
        <p class="center"><img src="Img/FinalProject/attiny1614pinout.png"></p>
        <table class="centertable">
            <tr>
                <th>Attiny1614 (Port pin):</th>
                <th>Arduino (Analog/Digital):</th>
            </tr>
            <tr>
                <th>PB3</th>
                <th>4 (switch4)</th>
            </tr>
            <tr>
                <th>PB2</th>
                <th>5 (switch1)</th>
            </tr>
            <tr>
                <th>PB1</th>
                <th>6 (switch2)</th>
            </tr>
            <tr>
                <th>PB0</th>
                <th>7 (switch3)</th>
            </tr>
        </table>
        <p class="center">How does the code work?</p>
        <h3 class="center">Arduino</h3>
        <table class="centertable">
            <tr>
                
                <th>1. #define: Used to define the switches to the<br><br>2. const int dlyTime: is use to set a delay for 200ms<br><br>
                3. In the void setup() we need to have a INPUT_PULLUP for each switch as in my PCB there is no resistor.<br><br>
                4. Serial.swap(1) is included because my TXD and RXD is swap<br><br>
                5. Serial begain(9600) also have to be included.<br><br>
                6. In the void loop() it was coded in a way that if switch1 == LOW than Serial.printIn('1') else it will read the other switches and Serial.printIn the correct number base on what switch is being read.<br><br>
                7. If no switch is being read, Serial.printIn('0')<br><br>
                8. At the end a delay is being used</th>
                <th><img src="Img/FinalProject/arduinocode.jpeg" width="280" height="550"></th>
            </tr>
        </table><br>
        <p class="center">Testing if my switches can be sense</p>
        <p class="center"><video class="center" controls>
            <source src="Img/FinalProject/testing.mp4" type="video/mp4" >
            Your browser does not support HTML video.
        </video></p>
        <h3 class="center">Python</h3>
        <table class="centertable">
            <tr>
                <th><img src="Img/FinalProject/pythoncode.png"></th>
            </tr>
            <tr>
                <th>1. First import serial, time and keyboard <br><br>
                2. initialize b = '0'<br><br>
                3. Depending on which COM port we using, put them accordingly for this case I am useing COM5<br><br>
                4. while 1, it will read the line which will then be initialize into Data<br><br>
                5. Depending on the Data the correct key will be send to the keyboard<br><br>
                6. In the arduino code above when switch1 is LOW it print line '1' so in the python it will send 4 to the keyboard</th>
                
            </tr>
        </table><br>
        <p class="center"><img src="Img/FinalProject/testingwithlaptop.jpeg" width="400" height="500"></p>
        <p class="center">After coding, I assemble my switches to the cover than connect the switches to the PCB board
            To upload the code to the chip I can use the UPDI and FTDI . After uploading to the chip, I remove my UPDI and open command prompt.
            First I have to do pip install pynput for my keys to work than I have to locate where my python code is and copy and paste into the command prompt.
            After that I just have to type python (file) to activate my keys
        </p>
        <p class="center"><img src="Img/FinalProject/install.png" ></p>
        <p class="center"><img src="Img/FinalProject/commandprom.png" ></p>

        <hr><h3 class="center" id="ass">Assembly</h3>
        <p class="center">All Parts: Case, Cover, Switches, FTDI board and keycaps</p>
        <p class="center"><img src="Img/FinalProject/All parts.jpeg" width="400" height="300"></p>
        <p class="center">Assemble the switches to the cover</p>
        <p class="center"><img src="Img/FinalProject/Switches with wire.jpeg" width="400" height="500"></p>
        <p class="center"><img src="Img/FinalProject/switches top.jpeg" width="300" height="400"></p>
        <p class="center">Securing the PCB to the case</p>
        <p class="center"><img src="Img/FinalProject/assembly.jpeg" width="400" height="300"></p>

        <hr><h3 class="center" id="Final">Final Product</h3>
        <p class="center"><img src="Img/FinalProject/finaltop.jpeg" width="400" height="300"></p>
        <p class="center"><img src="Img/FinalProject/Final1.jpeg" width="300" height="400"></p>
        <p class="center">Connect to my laptop</p>
        <p class="center"><img src="Img/FinalProject/testing1.jpeg" width="400" height="500"></p>
        <p class="center">Explaining on how the Product works:<video class="center" width="800" height="600" controls>
            <source src="Img/FinalProject/tetris.mp4" type="video/mp4" >
            Your browser does not support HTML video.
        </video></p>
        <p class="center">Slides</p>
        <p class="center"><img src="presentation.png" width="900" height="600"></p>
        <p class="center">1min Video<video class="center" width="800" height="600" controls>
            <source src="presentation.mp4" type="video/mp4" >
            Your browser does not support HTML video.
        </video></p>
        <p class="center" >Programming files and Fusion360: <a href="Final Project.zip">Click here to download files.</a><br><br></p>
        <div id="footer">
            Copyright &copy; 2021 Wan Li Xin Yuan
        </div>
    </body> 
</html>